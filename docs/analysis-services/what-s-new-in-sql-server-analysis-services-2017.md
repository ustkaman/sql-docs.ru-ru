---
title: Новые возможности служб Analysis Services SQL Server 2017 г. | Документы Microsoft
ms.date: 05/08/2018
ms.prod: sql
ms.technology: analysis-services
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: e43a64ace89df488b66a9e40591182ae34e6b66e
ms.sourcegitcommit: 38f8824abb6760a9dc6953f10a6c91f97fa48432
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2018
---
# <a name="whats-new-in-sql-server-2017-analysis-services"></a>Новые возможности служб Analysis Services SQL Server 2017 г.
[!INCLUDE[ssas-appliesto-sql2017](../includes/ssas-appliesto-sql2017.md)]

Службы аналитики SQL Server 2017 г. см. Некоторые из наиболее важных улучшений с SQL Server 2012. Построение на успех табличном режиме (впервые появился в SQL Server 2012 Analysis Services), этот выпуск делает эффективнее, чем когда-либо табличные модели.

Многомерный режим и Power Pivot в режиме интеграции с SharePoint являются основой для многих случаев службы Analysis Services. В жизненном цикле продукта служб Analysis Services эти режимы являются зрелой. Нет новых компонентов для любого из этих режимов, в этом выпуске. Тем не менее исправления и улучшения производительности включены.

Описываемые здесь функции включаются в службах Analysis Services SQL Server 2017 г. Но чтобы воспользоваться ими, необходимо также использовать последние версии [SQL Server Data Tools](../ssdt/download-sql-server-data-tools-ssdt.md) (SSDT) и [SQL Server Management Studio](../ssms/download-sql-server-management-studio-ssms.md) (SSMS). SSDT и SSMS обновляются ежемесячно новые и улучшенные возможности, которые обычно осуществляются с помощью новых функциональных возможностей в SQL Server.  

Хотя очень важно узнать о новых функциях, также важно знать, что выполняется рекомендуется к использованию и более не поддерживается в данном выпуске и в будущих выпусках. Убедитесь, что для извлечения [обратная совместимость (SQL Server 2017 г. службы Analysis Services)](analysis-services-backward-compatibility-sql2017.md).

Давайте рассмотрим некоторые из ключевых новых функций в этом выпуске.

## <a name="1400-compatibility-level-for-tabular-models"></a>Уровень совместимости 1400 для табличных моделей
  Чтобы воспользоваться преимуществами множества новых возможностей и функций, описанных здесь, необходимо задать новую или существующую табличных моделей или обновленным до уровня совместимости 1400. Модели с уровнем совместимости 1400 нельзя развертывать в SQL Server 2016 с пакетом обновления 1 (SP1) или более ранней версии либо переводить на более низкий уровень совместимости. Дополнительные сведения см. в разделе [уровень совместимости для табличных моделей служб Analysis Services](../analysis-services/tabular-models/compatibility-level-for-tabular-models-in-analysis-services.md).
  
В SSDT можно выбрать новый уровень совместимости 1400 при создании проектов табличной модели. 

![AS_NewTabular1400Project](../analysis-services/media/as-newtabular1400project.png)


Для обновления существующей табличной модели в SSDT, в обозревателе решений щелкните правой кнопкой мыши **Model.bim**, а затем в **свойства**, задайте **уровень совместимости** свойства  **SQL Server 2017 г. (1400)**. 

![AS_Model_Properties](../analysis-services/media/as-model-properties.png)

Важно помнить, после обновления существующей модели 1400, невозможно понизить. Обязательно сохраните резервную копию базы данных модели 1200.

## <a name="modern-get-data-experience"></a>Современный интерфейс получения данных
Когда дело доходит до импорта данных из источников данных в табличной модели, SQL Server Data Tools (SSDT) вводит современном **получить данные** взаимодействия для моделей на уровне совместимости 1400. Он основан на аналогичном интерфейсе в Power BI Desktop и Microsoft Excel 2016. Современные возможности получения данных обеспечивает преобразования огромную данных и возможности анализа данных с помощью построителя запросов на получение данных и выражений M.

Современные возможности получения данных поддерживает широкий спектр источников данных. Забегая вперед — обновления будет включать поддержку еще больше.

![AS_Get_Data_in_SSDT](../analysis-services/media/as-get-data-in-ssdt.png)

 Мощный и интуитивно понятный пользовательский интерфейс делает выбор данных и проще, чем когда-либо возможности преобразования и анализа данных.

![Дополнительно гибридного веб-приложения](../analysis-services/media/as-get-data-advanced.png)


Возникают в современных получение данных и возможности гибридного M не применяются к существующей upraded табличных моделей уровня совместимости 1200 1400. Новые возможности применяется только для новых моделей, созданных на уровне совместимости 1400.

## <a name="encoding-hints"></a>Подсказки по кодированию
Этой версии появилась кодирования подсказки — дополнительная возможность, используемый для оптимизации обработки (обновления данных) для больших табличных моделей в памяти. Для лучшего понимания кодировка, в разделе [производительности СУБД из табличных моделей в SQL Server 2012 Analysis Services](https://msdn.microsoft.com/library/dn393915.aspx) Технический документ, чтобы лучше понять кодировки.

* Значение кодировки обеспечивает более высокую производительность запросов, для столбцов, которые обычно используются только для агрегатов.

* Кодирование хэш является предпочтительным для группирования столбцы (часто значения, таблица измерения) и внешние ключи. Строковые столбцы всегда являются хэш в кодировке.

Числовые столбцы можно использовать любой из этих методов кодирования. Когда службы Analysis Services начинает обработку таблицы, если любой из таблиц пуст (с или без секций) или выполняемой операции обработки всей таблицы, для каждого числового столбца определить, следует ли применять значение или кодировка хэш взяты образцы значений . По умолчанию значение кодировки выбирается при образца различающихся значений в столбце является достаточно большим, — в противном случае кодировка хэш обычно обеспечивает более высокую степень сжатия. Возможно, для служб Analysis Services для изменения метода шифрования после столбца частично обработки в зависимости от получения дополнительных сведений о распределении данных и перезапустить процесс кодирования; Тем не менее это приводит к увеличению времени обработки и неэффективным. Техническая документация настройки производительности рассматривается более подробно повторно кодировка и описывает, как сделать это с помощью приложения SQL Server Profiler.

Указания кодировки позволяют разработчику модели, указав предпочтение, метод шифрования, заданный знания из профилирование данных и/или в ответ на повторная кодировка событий трассировки. Так как вычисление агрегата для хэш кодировке столбцы медленнее, чем для столбцов, значение в кодировке, кодирование может быть указан как подсказку для таких столбцов. Не гарантируется, что применяется приоритет. Он представляет собой рекомендацию, в отличие от параметра. Чтобы задать указание для кодировки, присвойте свойству EncodingHint для столбца. Возможные значения: «Default», «Значение» и «Хэш». Следующий фрагмент JSON на основе метаданных из файла Model.bim указывает значение для столбца Sales Amount кодировку.

```
{
    "name": "Sales Amount",
    "dataType": "decimal",
    "sourceColumn": "SalesAmount",
    "formatString": "\\$#,0.00;(\\$#,0.00);\\$#,0.00",
    "sourceProviderType": "Currency",
    "encodingHint": "Value"
}
```

## <a name="ragged-hierarchies"></a>Неоднородные иерархии
В табличных моделях можно моделировать иерархии типа "родители-потомки". Иерархии с разным количеством уровней часто называют неоднородными. По умолчанию неоднородные иерархии отображаются с пустыми полями для уровней ниже последнего дочернего уровня. Вот пример неоднородной иерархии на организационной диаграмме:

![AS_Ragged_Hierarchy](../analysis-services/media/as-ragged-hierarchy.png)

В этом выпуске появилось свойство **Скрыть члены** . Свойству **Скрыть члены** иерархии можно присвоить значение **Скрыть пустые члены**.

![AS_Hide_Blank_Members](../analysis-services/media/as-hide-blank-members.png)

 >[!NOTE]
 > Пустые члены в модели представлены пустым значением DAX, а не пустой строкой.

Если задано значение **Скрыть пустые члены**и модель развернута, более удобную для восприятия версию иерархии можно просмотреть в таких клиентских средствах создания отчетов, как Excel.

![AS_Non_Ragged_Hierarchy](../analysis-services/media/as-non-ragged-hierarchy.png)


## <a name="detail-rows"></a>Строки детализации
Теперь можно определить настраиваемый набор строк, на основе которого формируется значение меры. Строки детализации похожи на действие детализации по умолчанию в многомерных моделях. Это позволяет конечным пользователям просматривать более подробные данные, чем на агрегированном уровне. 

На приведенной ниже сводной таблице представлен объем продаж в Интернете по годам из образца табличной модели Adventure Works. Вы можете щелкнуть правой кнопкой мыши ячейку с агрегированным значением меры, а затем выбрать пункт **Показать подробности** , чтобы просмотреть строки детализации.

![AS_Show_Details](../analysis-services/media/as-show-details.png)

По умолчанию отображаются связанные данные из таблицы продаж в Интернете. Такие ограниченные возможности зачастую бесполезны для пользователя, так как таблица может не содержать столбцы, включающие нужную информацию, например имя клиента и сведения о заказе. С помощью строк детализации можно указать свойство **Выражение свойств детализации** для мер.

#### <a name="detail-rows-expression-property-for-measures"></a>Свойство "Выражение строк детализации" для мер
Свойство **Выражение свойств детализации** для мер позволяет создателям моделей настраивать столбцы и строки, возвращаемые конечным пользователям.

![AS_Detail_Rows_Expression_Property](../analysis-services/media/as-detail-rows-expression-property.png)

[SELECTCOLUMNS](https://msdn.microsoft.com/library/mt761759.aspx) DAX функция обычно используется в выражении строки детализации. В приведенном ниже примере определяются столбцы, возвращаемые для строк в таблице продаж в Интернете в образце табличной модели Adventure Works.

```
SELECTCOLUMNS(
    'Internet Sales',
    "Customer First Name", RELATED( Customer[Last Name]),
    "Customer Last Name", RELATED( Customer[First Name]),
    "Order Date", 'Internet Sales'[Order Date],
    "Internet Total Sales", [Internet Total Sales]
)
```

Когда свойство определено и модель развернута, настраиваемый набор строк возвращается при выборе пользователем команды **Показать подробности**. Контекст фильтра выбранной ячейки учитывается автоматически. В этом примере отображаются только строки для значения 2010.

![AS_Detail_Rows](../analysis-services/media/as-detail-rows.png)

#### <a name="default-detail-rows-expression-property-for-tables"></a>Свойство "Выражение строк детализации по умолчанию" для таблиц
Так же как и меры, таблицы имеют свойство для определения выражения строк детализации. Свойство **Выражение строк детализации по умолчанию** используется по умолчанию для всех мер в таблице. Меры, которые имеют свои собственные выражения, определенного наследует выражение из таблицы и отобразить строку, набор для таблицы. Это позволяет повторно использовать выражения, и более поздней версии, автоматически добавляется в таблицу новых мер наследует выражение.

![AS_Default_Detail_Rows_Expression](../analysis-services/media/as-default-detail-rows-expression.png)
 
#### <a name="detailrows-dax-function"></a>Функция DAX DETAILROWS
В этом выпуске появилась функция DAX `DETAILROWS` , которая возвращает набор строк, определяемый выражением строк детализации. Она действует аналогично инструкции `DRILLTHROUGH` в MDX, которая также совместима с выражениями строк детализации, определенными в табличных моделях.

Приведенный ниже запрос DAX возвращает набор строк, определенный выражением строк детализации для меры или ее таблицы. Если выражение не определено, возвращаются данные таблицы продаж в Интернете, так как она содержит меру.

```
EVALUATE DETAILROWS([Internet Total Sales])
```

## <a name="object-level-security"></a>Безопасность на уровне объекта
В этой версии появился [безопасности на уровне объекта](../analysis-services/tabular-models/object-level-security.md) для таблиц и столбцов. Помимо ограничения доступа к данным таблицы и столбца, можно защитить конфиденциальные имена таблиц и столбцов. Благодаря этому злоумышленник не сможет узнать о существовании этих таблиц.

Безопасность на уровне объекта необходимо задать, используя метаданные на основе JSON, табличных языка скриптов модели (TMSL) или табличной модели объектов (TOM). 

Например, приведенный ниже код позволяет защитить таблицу Product в образце табличной модели Adventure Works путем присвоения свойству **MetadataPermission** класса **TablePermission** значения **None**.

```
//Find the Users role in Adventure Works and secure the Product table
ModelRole role = db.Model.Roles.Find("Users");
Table productTable = db.Model.Tables.Find("Product");
if (role != null && productTable != null)
{
    TablePermission tablePermission;
    if (role.TablePermissions.Contains(productTable.Name))
    {
        tablePermission = role.TablePermissions[productTable.Name];
    }
    else
    {
        tablePermission = new TablePermission();
        role.TablePermissions.Add(tablePermission);
        tablePermission.Table = productTable;
    }
    tablePermission.MetadataPermission = MetadataPermission.None;
}
db.Update(UpdateOptions.ExpandFull);
```

## <a name="dynamic-management-views-dmvs"></a>Динамические административные представления
[Динамические административные представления](../analysis-services/instances/use-dynamic-management-views-dmvs-to-monitor-analysis-services.md) запросы в SQL Server Profiler, которые возвращают сведения о локальных операциях сервера и исправности сервера.
Этот выпуск включает усовершенствования для [динамические административные представления](https://docs.microsoft.com/sql/analysis-services/instances/use-dynamic-management-views-dmvs-to-monitor-analysis-services) (DMV) для табличных моделей на уровне совместимости 1200 и 1400.

[DISCOVER_CALC_DEPENDENCY](../analysis-services/schema-rowsets/xml/discover-calc-dependency-rowset.md) теперь работает с табличными моделями 1200 и 1400. Табличные модели 1400 Показать зависимости между M секций, выражения M и структурированными источниками данных. Дополнительные сведения см. в разделе [блога службы Analysis Services](https://blogs.msdn.microsoft.com/analysisservices/2017/07/17/whats-new-in-sql-server-2017-rc1-for-analysis-services/).

[MDSCHEMA_MEASUREGROUP_DIMENSIONS](../analysis-services/schema-rowsets/ole-db-olap/mdschema-measuregroup-dimensions-rowset.md) включены улучшения это динамическое административное Представление, которое используется для отображения мер размерности различных клиентских средств. Например функция Просмотр в сводных таблицах Excel позволяет пользователю кросс детализацию измерения, связанные с выбранной меры. Этот выпуск исправляет столбцы количества элементов, которые ранее отображение неправильные значения.

## <a name="dax-enhancements"></a>Улучшения DAX
Этот выпуск поддерживает новые функции DAX и функциональные возможности. Чтобы использовать преимущества, необходимо использовать последнюю версию SSDT. Дополнительные сведения см. в разделе [новые DAX-функции](https://msdn.microsoft.com/library/mt704075.aspx).

Одна из наиболее важные части новые функциональные возможности DAX — новый [оператор IN или функцию, CONTAINSROW](https://msdn.microsoft.com/library/mt842621.aspx) для выражения DAX. Она аналогична оператору [`TSQL IN`](https://msdn.microsoft.com/library/ms177682.aspx) , обычно используемому для указания нескольких значений в предложении `WHERE` .

Ранее многозначные фильтры обычно задавались с помощью логического оператора `OR` , как в следующем выражении меры:

```
Filtered Sales:=CALCULATE (
        [Internet Total Sales],
                 'Product'[Color] = "Red"
            || 'Product'[Color] = "Blue"
            || 'Product'[Color] = "Black"
    )
```

С помощью оператора `IN` это стало проще:
```
Filtered Sales:=CALCULATE (
        [Internet Total Sales], 'Product'[Color] IN { "Red", "Blue", "Black" }
    )
```

В этом случае оператор `IN` ссылается на таблицу с одним столбцом и тремя строками — по одному из каждых указанных цветов. Обратите внимание на то, что синтаксис конструктора таблицы предусматривает использование фигурных скобок.

Оператор `IN` функционально эквивалентен функции `CONTAINSROW` .
```
Filtered Sales:=CALCULATE (
        [Internet Total Sales], CONTAINSROW({ "Red", "Blue", "Black" }, 'Product'[Color])
    )
```

Оператор `IN` также можно эффективно использовать с конструкторами таблиц. Например, следующая мера выполняет фильтрацию по сочетанию цвета и категории продукта:
```
Filtered Sales:=CALCULATE (
        [Internet Total Sales],
        FILTER( ALL('Product'),
              ( 'Product'[Color] = "Red"   && Product[Product Category Name] = "Accessories" )
         || ( 'Product'[Color] = "Blue"  && Product[Product Category Name] = "Bikes" )
         || ( 'Product'[Color] = "Black" && Product[Product Category Name] = "Clothing" )
        )
    )
```

Благодаря новому оператору `IN` приведенное выше выражение меры эквивалентно следующему:
```
Filtered Sales:=CALCULATE (
        [Internet Total Sales],
        FILTER( ALL('Product'),
            ('Product'[Color], Product[Product Category Name]) IN
            { ( "Red", "Accessories" ), ( "Blue", "Bikes" ), ( "Black", "Clothing" ) }
        )
    )
```

## <a name="additional-improvements"></a>Дополнительные улучшения
Помимо новых функций служб Analysis Services, SSDT и SSMS также включает следующие улучшения:

* Повторное использование иерархии и столбец отображена в важнее местах в списке полей Power BI.
* Дата отношения для простого создания связи измерения даты, на основе полей даты.
* Вариант установки по умолчанию для служб Analysis Services теперь находится в табличном режиме.
* Новые источники данных для получения данных (Power Query).
* Редактор DAX для SSDT.
* Для запросов M поддерживают существующими источниками данных DirectQuery.
* Усовершенствования SSMS, такие как просмотр, редактирование и сценарии для структурированными источниками данных.



## <a name="see-also"></a>См. также:
[Заметки о выпуске SQL Server 2017 г.](../sql-server/sql-server-2017-release-notes.md)   
[Что нового в SQL Server 2017](../sql-server/what-s-new-in-sql-server-2017.md)
